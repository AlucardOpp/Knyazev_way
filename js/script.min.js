const NUMBERS=/[0-9]/,TEN_NUMBERS=/[0-9]{10}/,at=/@+/,MIN_MAX_TEL_LENGTH=10,isStorageSupport=!0;let storageTel="",storageEmail="";const pageHeaderWrapper=document.querySelector(".page-header__wrapper"),pageHeaderContainer=document.querySelector(".page-header__container"),mainNavList=document.querySelector(".main-nav__list"),mainNavToggle=document.querySelector(".main-nav__toggle"),placesOfVisitLinks=document.querySelectorAll(".places-of-visit__link-block"),tabTriggers=document.querySelectorAll(".countries__button-tab"),tabContents=document.querySelectorAll(".countries__item"),tabButtons=document.querySelectorAll(".countries__button"),overlay=document.querySelector(".overlay"),successModal=document.querySelector(".success-modal"),successModalCloseButton=document.querySelector(".success-modal__close"),tour=document.querySelector(".tour"),tourCloseButton=document.querySelector(".tour__close"),tourInputs=document.querySelectorAll(".tour__input"),tourInputTel=document.querySelector(".tour__input--tel"),tourInputEmail=document.querySelector(".tour__input--email"),tourInputContainerTel=document.querySelector(".tour__input-container--tel"),tourInputContainerEmail=document.querySelector(".tour__input-container--email"),tourButtonSubmit=document.querySelector(".tour__button"),tourForm=document.querySelector(".tour__form"),questionsFormInputs=document.querySelectorAll(".questions-form__input"),questionsFormInputTel=document.querySelector(".questions-form__input--tel"),questionsFormInputEmail=document.querySelector(".questions-form__input--email"),questionsFormInputContainerTel=document.querySelector(".questions-form__input-container--tel"),questionsFormInputContainerEmail=document.querySelector(".questions-form__input-container--email"),questionsFormButtonSubmit=document.querySelector(".questions-form__button"),questionsFormContainer=document.querySelector(".questions-form__container"),pricesButtons=document.querySelectorAll(".prices__button"),pricesItems=document.querySelectorAll(".prices__item"),requiredTourInputs=[];tourInputs.forEach((t=>{t.required&&requiredTourInputs.push(t)}));const requiredQuestionsFormInputs=[];questionsFormInputs.forEach((t=>{t.required&&requiredQuestionsFormInputs.push(t)}));try{storageTel=localStorage.getItem("tel"),storageEmail=localStorage.getItem("email")}catch(t){isStorageSupport=!1}storageTel&&(questionsFormInputTel.value=storageTel),storageEmail&&(questionsFormInputEmail.value=storageEmail),pageHeaderWrapper.classList.remove("page-header__wrapper--nojs"),mainNavList.classList.remove("main-nav__list--nojs"),mainNavToggle.classList.remove("main-nav__toggle--nojs"),mainNavToggle.addEventListener("click",(()=>{pageHeaderContainer.classList.toggle("page-header__container--opened"),mainNavToggle.classList.toggle("main-nav__toggle--opened"),mainNavList.classList.toggle("main-nav__list--opened")}));const onTabLinkClick=t=>{const e=t.target.getAttribute("data-tab"),o=document.querySelector('.countries__button-tab[data-tab="'+e+'"]'),n=document.querySelector('.countries__item[data-tab="'+e+'"]'),s=document.querySelector(".countries__button-tab--show"),u=document.querySelector(".countries__item--show");s.classList.remove("countries__button-tab--show"),o.classList.add("countries__button-tab--show"),u.classList.remove("countries__item--show"),n.classList.add("countries__item--show")};tabTriggers.forEach((t=>{t.addEventListener("click",onTabLinkClick)})),placesOfVisitLinks.forEach((t=>{t.addEventListener("click",onTabLinkClick)}));const onTourInputTelInput=()=>{const t=tourInputTel.value,e=tourInputTel.value.length,o=()=>{tourInputTel.classList.add("input--error"),tourInputContainerTel.classList.add("tour__input-container--error")},n=()=>{tourInputTel.classList.remove("input--error"),tourInputContainerTel.classList.remove("tour__input-container--error")};t?e>10?(tourInputTel.setCustomValidity(`Удалите лишние ${e-10} символы`),o()):NUMBERS.test(t)?e<10?(tourInputTel.setCustomValidity(`Ещё ${10-e} символа(ов)`),o()):TEN_NUMBERS.test(t)?(tourInputTel.setCustomValidity(""),n()):(tourInputTel.setCustomValidity("В данном поле требуются только цифры"),o()):(tourInputTel.setCustomValidity("В данном поле требуются только цифры"),o()):tourInputTel.setCustomValidity("Обязательное поле"),t||n(),tourInputTel.reportValidity()},onTourInputEmailInput=()=>{const t=tourInputEmail.value;t&&!at.test(t)?(tourInputEmail.setCustomValidity('Адрес электронной почты должен содержать "@"'),tourInputEmail.classList.add("input--error"),tourInputContainerEmail.classList.add("tour__input-container--error")):(tourInputEmail.setCustomValidity(""),tourInputEmail.classList.remove("input--error"),tourInputContainerEmail.classList.remove("tour__input-container--error"))},onTourButtonSubmitClick=()=>{requiredTourInputs.forEach((t=>{t.checkValidity()||(t.classList.add("input--error"),t.classList.contains("tour__input--tel")?tourInputContainerTel.classList.add("tour__input-container--error"):tourInputContainerEmail.classList.add("tour__input-container--error"))}))},deleteTourFormListeners=()=>{tour.classList.remove("tour--show"),overlay.classList.remove("overlay--show"),tourCloseButton.removeEventListener("click",onTourCloseButtonClick),tourInputTel.removeEventListener("input",onTourInputTelInput),tourInputEmail.removeEventListener("input",onTourInputEmailInput),tourButtonSubmit.removeEventListener("click",onTourButtonSubmitClick),document.removeEventListener("keydown",onTourEscKeydown),document.removeEventListener("click",onTourOverlayClick)},onTourCloseButtonClick=()=>{deleteTourFormListeners()},onTourEscKeydown=t=>{"Escape"!==t.key&&"Esc"!==t.key||deleteTourFormListeners()},onTourOverlayClick=t=>{t.target.classList.contains("overlay")&&deleteTourFormListeners()},deleteSuccessModalListeners=()=>{overlay.classList.remove("overlay--show"),successModal.classList.remove("success-modal--show"),successModalCloseButton.removeEventListener("click",onSuccessModalCloseButtonClick),document.removeEventListener("keydown",onSuccessEscKeydown),document.removeEventListener("click",onSuccessOverlayClick)},onSuccessModalCloseButtonClick=()=>{deleteSuccessModalListeners()},onSuccessEscKeydown=t=>{"Escape"!==t.key&&"Esc"!==t.key||deleteSuccessModalListeners()},onSuccessOverlayClick=t=>{t.target.classList.contains("overlay")&&deleteSuccessModalListeners()},onButtonTourOpenClick=()=>{tour.classList.add("tour--show"),overlay.classList.add("overlay--show"),tourInputTel.focus(),storageTel&&(tourInputTel.value=storageTel),storageEmail&&(tourInputEmail.value=storageEmail),tourInputTel.addEventListener("input",onTourInputTelInput),tourInputEmail.addEventListener("input",onTourInputEmailInput),tourButtonSubmit.addEventListener("click",onTourButtonSubmitClick),tourCloseButton.addEventListener("click",onTourCloseButtonClick),document.addEventListener("keydown",onTourEscKeydown),document.addEventListener("click",onTourOverlayClick)};tabButtons.forEach((t=>{t.addEventListener("click",onButtonTourOpenClick)})),pricesButtons.forEach((t=>{t.addEventListener("click",onButtonTourOpenClick)})),tourForm.addEventListener("submit",(t=>{t.preventDefault(),tour.classList.remove("tour--show"),successModal.classList.add("success-modal--show"),successModalCloseButton.addEventListener("click",onSuccessModalCloseButtonClick),document.addEventListener("keydown",onSuccessEscKeydown),document.addEventListener("click",onSuccessOverlayClick),isStorageSupport&&(tourInputTel.value&&localStorage.setItem("tel",tourInputTel.value),tourInputEmail.value&&localStorage.setItem("email",tourInputEmail.value)),tourInputTel.removeEventListener("input",onTourInputTelInput),tourInputEmail.removeEventListener("input",onTourInputEmailInput),tourButtonSubmit.removeEventListener("click",onTourButtonSubmitClick),tourCloseButton.removeEventListener("click",onTourCloseButtonClick),document.removeEventListener("keydown",onTourEscKeydown),document.removeEventListener("click",onTourOverlayClick)}));const onQuestionsFormInputTelInput=()=>{const t=questionsFormInputTel.value,e=questionsFormInputTel.value.length,o=()=>{questionsFormInputTel.classList.add("input--error"),questionsFormInputContainerTel.classList.add("questions-form__input-container--error")},n=()=>{questionsFormInputTel.classList.remove("input--error"),questionsFormInputContainerTel.classList.remove("questions-form__input-container--error")};t?e>10?(questionsFormInputTel.setCustomValidity(`Удалите лишние ${e-10} символы`),o()):NUMBERS.test(t)?e<10?(questionsFormInputTel.setCustomValidity(`Ещё ${10-e} символа(ов)`),o()):TEN_NUMBERS.test(t)?(questionsFormInputTel.setCustomValidity(""),n()):(questionsFormInputTel.setCustomValidity("В данном поле требуются только цифры"),o()):(questionsFormInputTel.setCustomValidity("В данном поле требуются только цифры"),o()):questionsFormInputTel.setCustomValidity("Обязательное поле"),t||n(),questionsFormInputTel.reportValidity()},onQuestionsFormInputEmailInput=()=>{const t=questionsFormInputEmail.value;t&&!at.test(t)?(questionsFormInputEmail.setCustomValidity('Адрес электронной почты должен содержать "@"'),questionsFormInputEmail.classList.add("input--error"),questionsFormInputContainerEmail.classList.add("questions-form__input-container--error")):(questionsFormInputEmail.setCustomValidity(""),questionsFormInputEmail.classList.remove("input--error"),questionsFormInputContainerEmail.classList.remove("questions-form__input-container--error"))},onQuestionsFormButtonSubmitClick=()=>{requiredQuestionsFormInputs.forEach((t=>{t.checkValidity()||(t.classList.add("input--error"),t.classList.contains("questions-form__input--tel")?questionsFormInputContainerTel.classList.add("questions-form__input-container--error"):questionsFormInputContainerEmail.classList.add("questions-form__input-container--error"))}))};questionsFormInputTel.addEventListener("input",onQuestionsFormInputTelInput),questionsFormInputEmail.addEventListener("input",onQuestionsFormInputEmailInput),questionsFormButtonSubmit.addEventListener("click",onQuestionsFormButtonSubmitClick),questionsFormContainer.addEventListener("submit",(t=>{t.preventDefault(),overlay.classList.add("overlay--show"),successModal.classList.add("success-modal--show"),successModalCloseButton.addEventListener("click",onSuccessModalCloseButtonClick),document.addEventListener("keydown",onSuccessEscKeydown),document.addEventListener("click",onSuccessOverlayClick),isStorageSupport&&(questionsFormInputTel.value&&localStorage.setItem("tel",questionsFormInputTel.value),questionsFormInputEmail.value&&localStorage.setItem("email",questionsFormInputEmail.value))})),$('a[href*="#"]').on("click",(function(t){t.preventDefault();const e=$(this).attr("href");$("html, body").stop().animate({scrollTop:$(e).offset().top-60},800)}));